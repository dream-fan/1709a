var swiper=new Swiper(".swiper-container",{spaceBetween:30,centeredSlides:!0,autoplay:{delay:2500,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0}});function getStoreLimit(t,e){console.log("page",t),$.get("http://localhost:3000/storelimit",{page:t,size:e},function(t){var e=baidu.template("store-list-item-temp",t);$(".bootstrap-left3").html(e)})}$(".float-left").hover(function(){var t=$(this).index();$(".float-right-one").eq(t).show(),$(".img1").eq(t).show()},function(){var t=$(this).index();$(".float-right-one").eq(t).hide(),$(".img1").eq(t).hide()}),$(".float-right-one").hover(function(){$(this).show()},function(){$(this).hide()}),$.get("http://localhost:3000/store",function(t){var e=baidu.template("store-list-item-temp",t);$(".bootstrap-left3").html(e),$("#page").paging({pageNo:0,totalPage:Math.ceil(t.total/5),totalSize:t.total,callback:function(t){console.log(t),getStoreLimit(t-1,5)}})}),$.get("http://localhost:3000/phone",function(t){var e=baidu.template("center-bottom2-baidu",t);$(".center-bottom2-li").html(e),console.log(t);var a=JSON.stringify(t);console.log(a),window.localStorage.detail=a});var map=null;function showMap(){$.get("http://localhost:3000/store",function(t){addmap(t)})}function addmap(t){map=new AMap.Map("container",{resizeEnable:!0,center:[116.387271,39.922501],zoom:16});for(var e=0;e<t.data.length;e++){var a=t.data[e];addMarker([a.longitude,a.latitude],a)}}function addMarker(t,e){AMapUI.loadUI(["overlay/SimpleMarker"],function(a){var o=new a({iconStyle:{src:"http://webapi.amap.com/theme/v1.3/markers/b/mark_r.png",style:{width:"20px"}},map:map,position:t});o.info=e,AMap.event.addListener(o,"click",function(t){addWindow(this)})})}function addWindow(t){var e=t.info.name,a=[];a.push(t.info.business),a.push("<a href='"+t.info.url+"'>进入店铺>></a>"),new AMap.InfoWindow({isCustom:!0,content:createInfoWindow(e,a.join("<br/>")),offset:new AMap.Pixel(16,-45)}).open(map,t.getPosition())}function createInfoWindow(t,e){var a=document.createElement("div");a.className="info";var o=document.createElement("div"),n=document.createElement("div"),i=document.createElement("img");o.className="info-top",n.innerHTML=t,i.src="http://webapi.amap.com/images/close2.gif",i.onclick=closeInfoWindow,o.appendChild(n),o.appendChild(i),a.appendChild(o);var l=document.createElement("div");l.className="info-middle",l.style.backgroundColor="white",l.innerHTML=e,a.appendChild(l);var r=document.createElement("div");r.className="info-bottom",r.style.position="relative",r.style.top="0px",r.style.margin="0 auto";var s=document.createElement("img");return s.src="http://webapi.amap.com/images/sharp.png",r.appendChild(s),a.appendChild(r),a}function closeInfoWindow(){map.clearInfoWindow()}$("#mapbtn").on("click",function(){$("#container").show(),$(".black-cover").show()}),$("#closebtn").on("click",function(){$("#container").hide(),$(".black-cover").hide()}),showMap(),$("#regist").click(function(){$(".regist").addClass("regist").show()}),$("#login").click(function(){$(".login").addClass("login").show()}),$(".diancha").click(function(){$(".login").addClass("login").hide(),$(".regist").addClass("regist").hide()}),$("#form1").validate({onFocus:function(){return this.parent().addClass("active"),!1},onBlur:function(){var t=this.parent(),e=parseInt(this.attr("data-status"));return t.removeClass("active"),e||t.addClass("error"),!1}});var verifyCode=new GVerify("v_container");$("#form1").on("submit",function(t){t.preventDefault();var e=$(this).validate("submitValidate"),a=verifyCode.validate($("#verifyCode").val());if(e&&a){console.log("验证通过！！");var o=$("#email1").val(),n=$("#password1").val();$.post("http://localhost:3000/regist",{email:o,password:n},function(t){console.log(t),"ok"==t.status?$(".login").addClass("login").show():$("#regist_err1").text("账号已注册")})}}),$("#form2").validate({onFocus:function(){return this.parent().addClass("active"),!1},onBlur:function(){var t=this.parent(),e=parseInt(this.attr("data-status"));return t.removeClass("active"),e||t.addClass("error"),!1}}),$("#form2").on("submit",function(t){if(t.preventDefault(),$(this).validate("submitValidate")){console.log("验证通过！！");var e=$("#email2").val(),a=$("#password2").val();$.post("http://localhost:3000/login",{email:e,password:a},function(t){console.log(t),"ok"==t.status?window.location.href="index.html":$("#regist_err2").text("用户名或密码错误")})}});